(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[660],{9159:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orders",function(){return s(6319)}])},5294:function(e,t,s){"use strict";s.d(t,{Z:function(){return g}});var n=s(5893),i=s(7357),l=s(2293),a=s(155),r=s(6886),d=s(5861),o=s(1664),c=s.n(o);function h(){return(0,n.jsx)(i.Z,{sx:{flexGrow:1},children:(0,n.jsx)(l.Z,{position:"static",component:"div",children:(0,n.jsx)(a.Z,{children:(0,n.jsxs)(r.ZP,{container:!0,spacing:2,alignItems:"center",children:[(0,n.jsx)(r.ZP,{item:!0,xs:12,md:4,children:(0,n.jsx)(d.Z,{variant:"h6",color:"inherit",component:"div",children:"Empulse - Assignment"})}),(0,n.jsx)(r.ZP,{item:!0,xs:12,md:8,children:(0,n.jsx)(i.Z,{sx:{flexGrow:1,display:{xs:"flex"}},justifyContent:{md:"flex-end",sm:"flex-start"},children:[{title:"Home",link:"/"},{title:"Order",link:"/orders"},{title:"Customer",link:"/customers"}].map(e=>(0,n.jsx)(d.Z,{color:"inherit",children:(0,n.jsx)(c(),{href:e.link,style:{textDecoration:"none",color:"#fff",padding:"4px",margin:"8px",textTransform:"uppercase",fontFamily:"inherit"},children:e.title})},e.title))})})]})})})})}var u=s(9008),m=s.n(u),x=s(2115),p=s(4866),f=s(6901);function j(){let e={type:"info",message:"flash message 123",isOpen:!1},t=(0,x.V)(e=>e.flashMessage),s=(0,x.V)(e=>e.showFlashMessage);return(0,n.jsx)(n.Fragment,{children:t.isOpen?(0,n.jsx)(p.Z,{open:t.isOpen,message:t.message,autoHideDuration:6e3,onClose:()=>{s(e)},children:(0,n.jsx)(f.Z,{severity:t.type,fullWidth:!0,children:t.message})}):(0,n.jsx)(n.Fragment,{})})}function g(e){let{children:t}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(m(),{children:[(0,n.jsx)("title",{children:"Empulse - Assignment"}),(0,n.jsx)("meta",{name:"description",content:"Generated by create next app"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)(h,{}),(0,n.jsxs)("main",{style:{padding:"16px"},children:[(0,n.jsx)(j,{}),t]})]})}},6319:function(e,t,s){"use strict";s.r(t);var n=s(5893),i=s(5294),l=s(7294),a=s(2115),r=s(5861),d=s(7357),o=s(3321),c=s(4666),h=s(7645),u=s(6580),m=s(6886),x=s(1903),p=s(913),f=s(3841),j=s(5945),g=s(5819),Z=s(1425),y=s(2156),v=s(2359),C=s(5188),w=s(1360),O=s(2912);let D=()=>{var e;let[t,s]=(0,l.useState)([]),D=(0,a.V)(e=>e.showFlashMessage),S=()=>{fetch("http://localhost:8080/api/v1/orders").then(e=>e.json()).then(e=>s(e)).catch(()=>{D({type:"danger",message:"Get orders failed",isOpen:!0})})},[b,k]=(0,l.useState)([]),E=()=>{fetch("http://localhost:8080/api/v1/customers").then(e=>e.json()).then(e=>k(e))},F=e=>{let t=e.id;fetch("http://localhost:8080/api/v1/orders/".concat(t),{method:"DELETE"}).then(e=>{D({type:"success",message:"Order Deleted Successfuly",isOpen:!0})}).catch(()=>{D({type:"danger",message:"Delete failed",isOpen:!0})}).finally(()=>{S()})};(0,l.useEffect)(()=>{S(),E()},[]);let[P,I]=(0,l.useState)(!1),[N,_]=(0,l.useState)(""),[M,A]=(0,l.useState)(""),[H,L]=(0,l.useState)(new Date),[U,G]=(0,l.useState)(0),[R,V]=(0,l.useState)([]),W=()=>{I(!0)},T=()=>{I(!1),_(""),G(0),A(""),L(new Date),V([])},B=e=>Promise.all(Array.from(e).map(e=>K(e))),K=e=>new Promise((t,s)=>{let n=new FileReader;n.readAsDataURL(e),n.onload=function(s){let n=new Image;n.src=s.target.result,n.onload=function(){let s=document.createElement("canvas");s.width=n.width,s.height=n.height;let i=s.getContext("2d");i.drawImage(n,0,0);let l=i.getImageData(0,0,n.width,n.height),a=l.data;for(let e=0;e<a.length;e+=4){let t=(a[e]+a[e+1]+a[e+2])/3;a[e]=t,a[e+1]=t,a[e+2]=t}i.putImageData(l,0,0),s.toBlob(s=>{t(new File([s],e.name,{type:e.type,lastModified:e.lastModified}))},e.type)}},n.onerror=function(e){s(e)}}),X=()=>{let e=new FormData;for(let t of(e.append("subject",N),e.append("status","0"),e.append("customerId",M),H&&e.append("orderDate",(0,O.Z)(H,"dd-MM-yyyy")),R.forEach(t=>{e.append("multipartFiles",t)}),e.entries()))console.log(t[0]+", "+t[1]);fetch("http://localhost:8080/api/v1/orders",{method:"post",body:e}).then(e=>{e.status>=200&&e.status<=300&&(D({type:"success",message:"Order Created Successfuly",isOpen:!0}),T()),e.status>=400&&e.status<=500&&D({type:"error",message:"Create failed. Please check your inputs",isOpen:!0})}).finally(()=>{S()})},z=(0,n.jsxs)("div",{children:[(0,n.jsx)(o.Z,{color:"secondary",variant:"contained",onClick:W,children:"Create"}),(0,n.jsxs)(c.Z,{open:P,onClose:T,"aria-labelledby":"alert-dialog-title",children:[(0,n.jsx)(h.Z,{id:"alert-dialog-title",children:"Form Order"}),(0,n.jsx)(u.Z,{children:(0,n.jsxs)(m.ZP,{container:!0,spacing:2,children:[(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsx)(x.Z,{label:"Subject",variant:"filled",fullWidth:!0,value:N,onChange:e=>{_(e.target.value)}})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsxs)(p.Z,{fullWidth:!0,children:[(0,n.jsx)(f.Z,{id:"customer-select",children:"Customer"}),(0,n.jsx)(j.Z,{labelId:"customer-select",label:"Customer",onChange:e=>{A(e.target.value)},value:M,fullWidth:!0,children:b.map(e=>(0,n.jsx)(g.Z,{value:e.id,children:e.name},e.id))})]})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsx)(v._,{dateAdapter:w.H,children:(0,n.jsx)(C.M,{label:"Order Date",value:H,minDate:new Date,onChange:e=>{L(e),console.log((0,O.Z)(e,"dd-MM-yyyy HH:mm:ss"))},renderInput:e=>(0,n.jsx)(x.Z,{...e,fullWidth:!0})})})}),(0,n.jsx)(m.ZP,{item:!0,xs:12,children:(0,n.jsxs)(o.Z,{variant:"contained",component:"label",children:["Upload Files",(0,n.jsx)("input",{type:"file",hidden:!0,accept:"image/*",onChange:e=>{B(e.target.files).then(e=>{let t=Array.from(e);V(t)})},multiple:!0})]})}),R.map(e=>(0,n.jsx)(m.ZP,{item:!0,xs:3,children:(0,n.jsx)("img",{height:"100%",width:"100%",src:URL.createObjectURL(e),alt:"123"})},e.name))]})}),(0,n.jsxs)(Z.Z,{children:[(0,n.jsx)(o.Z,{onClick:T,children:"CANCEL"}),(0,n.jsx)(o.Z,{onClick:X,autoFocus:!0,children:"OK"})]})]})]}),[q,J]=(0,l.useState)(null),[Q,Y]=(0,l.useState)(!1),$=()=>{J(null),Y(!1)},ee=(0,n.jsxs)(c.Z,{open:Q,onClose:$,"aria-labelledby":"alert-dialog-title",children:[(0,n.jsxs)(h.Z,{id:"alert-dialog-title",children:["Order ID: ",q?q.id:""]}),(0,n.jsxs)(u.Z,{children:[(0,n.jsxs)("div",{children:["Subject: ",q?q.subject:""]}),(0,n.jsxs)("div",{children:["Order Date: ",q?q.orderDate:""]}),(0,n.jsxs)("div",{children:["Customer Name: ",q?q.customer.name:""]}),(0,n.jsxs)("div",{children:["Customer Email: ",q?q.customer.email:""]}),(0,n.jsxs)("div",{children:["Images: ",q?null===(e=q.orderFiles)||void 0===e?void 0:e.length:""]})]}),(0,n.jsxs)(Z.Z,{children:[(0,n.jsx)(o.Z,{color:"error",onClick:()=>{F(q),$()},children:"Delete"}),(0,n.jsx)(o.Z,{onClick:$,autoFocus:!0,children:"OK"})]})]});return(0,n.jsxs)(i.Z,{children:[(0,n.jsx)(r.Z,{variant:"h3",marginBottom:4,children:"Orders"}),(0,n.jsx)("div",{children:z}),(0,n.jsx)("div",{children:ee}),(0,n.jsx)("div",{style:{width:"100%"},children:(0,n.jsx)(y._,{rows:t,columns:[{field:"id",headerName:"ID",flex:1},{field:"subject",headerName:"Name",flex:1},{field:"orderDate",headerName:"Order Date",flex:1},{field:"status",headerName:"Status",flex:1,renderCell:e=>{let{row:t}=e,s=0===t.status?"PROCESSING":1===t.status?"SUCCESS":"FAILED";return(0,n.jsx)(r.Z,{children:s})}},{field:"action",headerName:"Actions",flex:1,renderCell:e=>{let{row:t}=e;return(0,n.jsxs)(d.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,n.jsx)(o.Z,{color:"primary",onClick:()=>{J(t),Y(!0)},variant:"contained",sx:{mr:"4px"},children:"View"}),(0,n.jsx)(o.Z,{color:"error",onClick:()=>{F(t)},variant:"contained",children:"Delete"})]})}}],pageSize:5,rowsPerPageOptions:[5],disableSelectionOnClick:!0,autoHeight:!0})})]})};t.default=D},2115:function(e,t,s){"use strict";s.d(t,{V:function(){return i}});var n=s(4529);let i=(0,n.Ue)(e=>({flashMessage:{type:"info",message:"flash message 123",isOpen:!1},type:"info",message:"flash message 123",isOpen:!1,updateIsOpen:t=>e(()=>({isOpen:t})),showFlashMessage:t=>e(()=>({flashMessage:{isOpen:t.isOpen,message:t.message,type:t.type}}))}))}},function(e){e.O(0,[411,18,989,774,888,179],function(){return e(e.s=9159)}),_N_E=e.O()}]);